<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Downloader Video Sosmed</title>
  <style>
    body{font-family:Arial;margin:30px;text-align:center}
    input{width:80%;padding:10px;font-size:16px}
    button{padding:10px 18px;margin-top:10px;font-size:16px}
    #result{margin-top:20px}
    a.download-link{display:inline-block;margin:8px;padding:8px 12px;border-radius:6px;text-decoration:none;border:1px solid #ccc}
  </style>
</head>
<body>
  <h2>Downloader Video Legal</h2>
  <p>Tempel link video (TikTok, Instagram, YouTube, dsb).</p>

  <input id="url" placeholder="Masukkan URL video..." />
  <br/>
  <button id="btn">Ambil link ⬇️</button>

  <div id="result"></div>

  <script>
    document.getElementById('btn').onclick = async () => {
      const url = document.getElementById('url').value.trim();
      const result = document.getElementById('result');
      result.innerHTML = 'Memproses...';

      if (!url) { result.innerHTML = 'Masukkan URL dulu ya.'; return; }

      try {
        const r = await fetch('/api/download?url=' + encodeURIComponent(url));
        const j = await r.json();

        if (j.error) {
          result.innerHTML = '<b>Error:</b> ' + j.error;
          return;
        }

        result.innerHTML = '<h4>Download:</h4>';
        j.files.forEach(f => {
          const a = document.createElement('a');
          a.href = f.url;
          a.target = '_blank';
          a.className = 'download-link';
          a.textContent = (f.quality || 'file') + ' • ' + (f.type || '');
          result.appendChild(a);
        });

      } catch (err) {
        result.innerHTML = 'Terjadi kesalahan: ' + err.message;
      }
    };
  </script>
</body>
</html>
